<!doctype html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="format-detection" content="telephone=no">
  <title>首页</title>
  <meta name="description" content="">
  <meta name="keywords" content="">
  <link href="css/index.css" rel="stylesheet">

  <script src="js/flexible.js" type="text/javascript"></script>
</head>
<body>
  <div class="header">
    <a href="javascript:void(0);" class="back icon_back"></a>
    <h3 class="title">我的轨迹</h3>
    <a href="javascript:void(0);" class="action action_list icon_list"></a>
    <div class="dropdown">
      <a href="javascript:void(0);" class="list">
        <i class="icon_path"></i>
        轨迹开关
      </a>
      <a href="javascript:void(0);" class="list edit">
        <i class="icon_edit"></i>
        编辑
      </a>
    </div>
    <a href="javascript:void(0);" class="cancel">取消</a>
  </div>
  <div class="content path_list">
      <div class="list_wrap">
        <div class="list">
          <div class="title">3月12日 周一</div>
          <div class="list1">
            <a href="path_details.html" class="link">
              <div class="checkable"></div>
              <p class="time">09:30~10:51</p>
              <p class="item">
                <span>行驶里程</span>
                <strong class="number">72</strong>
                <var class="unit">公里</var>
              </p>
              <p class="item">
                <span>平均车速</span>
                <strong class="number">72</strong>
                <var class="unit">公里／每小时</var>
              </p>
              <p class="item">
                <span>驾驶建议</span>
                <strong class="number">72</strong>
                <var class="unit">项</var>
              </p>
              <div class="result">
                <p>总评</p>
                <var>一般</var>
              </div>
            </a>
            <a href="javascript:void(0)" class="link">
              <div class="checkable"></div>
              <p class="time">09:30~10:51</p>
              <p class="item">
                <span>行驶里程</span>
                <strong class="number">72</strong>
                <var class="unit">公里</var>
              </p>
              <p class="item">
                <span>平均车速</span>
                <strong class="number">72</strong>
                <var class="unit">公里／每小时</var>
              </p>
              <p class="item">
                <span>驾驶建议</span>
                <strong class="number">72</strong>
                <var class="unit">项</var>
              </p>
              <div class="result">
                <p>总评</p>
                <var>一般</var>
              </div>
            </a>
            <a href="javascript:void(0)" class="link">
              <div class="checkable"></div>
              <p class="time">09:30~10:51</p>
              <p class="item">
                <span>行驶里程</span>
                <strong class="number">72</strong>
                <var class="unit">公里</var>
              </p>
              <p class="item">
                <span>平均车速</span>
                <strong class="number">72</strong>
                <var class="unit">公里／每小时</var>
              </p>
              <p class="item">
                <span>驾驶建议</span>
                <strong class="number">72</strong>
                <var class="unit">项</var>
              </p>
              <div class="result">
                <p>总评</p>
                <var>一般</var>
              </div>
            </a>
          </div>
        </div>
        <div class="list">
          <div class="title">3月12日 周一</div>
          <div class="list1">
            <a href="javascript:void(0)" class="link">
              <div class="checkable"></div>
              <p class="time">09:30~10:51</p>
              <p class="item">
                <span>行驶里程</span>
                <strong class="number">72</strong>
                <var class="unit">公里</var>
              </p>
              <p class="item">
                <span>平均车速</span>
                <strong class="number">72</strong>
                <var class="unit">公里／每小时</var>
              </p>
              <p class="item">
                <span>驾驶建议</span>
                <strong class="number">72</strong>
                <var class="unit">项</var>
              </p>
              <div class="result">
                <p>总评</p>
                <var>一般</var>
              </div>
            </a>
            <a href="javascript:void(0)" class="link">
              <div class="checkable"></div>
              <p class="time">09:30~10:51</p>
              <p class="item">
                <span>行驶里程</span>
                <strong class="number">72</strong>
                <var class="unit">公里</var>
              </p>
              <p class="item">
                <span>平均车速</span>
                <strong class="number">72</strong>
                <var class="unit">公里／每小时</var>
              </p>
              <p class="item">
                <span>驾驶建议</span>
                <strong class="number">72</strong>
                <var class="unit">项</var>
              </p>
              <div class="result">
                <p>总评</p>
                <var>一般</var>
              </div>
            </a>
            <a href="javascript:void(0)" class="link">
              <div class="checkable"></div>
              <p class="time">09:30~10:51</p>
              <p class="item">
                <span>行驶里程</span>
                <strong class="number">72</strong>
                <var class="unit">公里</var>
              </p>
              <p class="item">
                <span>平均车速</span>
                <strong class="number">72</strong>
                <var class="unit">公里／每小时</var>
              </p>
              <p class="item">
                <span>驾驶建议</span>
                <strong class="number">72</strong>
                <var class="unit">项</var>
              </p>
              <div class="result so"> <!-- best/good/so/bad/terrible -->
                <p>总评</p>
                <var>一般</var>
              </div>
            </a>
          </div>
        </div>
      </div>
      <div class="loading"></div>
    <a class="delete" href="javascript:void(0);">删除(<span>0</span>)</a>
  </div>
</body>
<script src="js/fastclick.js" type="text/javascript"></script>
<script src="js/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(".action_list").click(function(e){
  e.stopPropagation();
  $(".dropdown").show();
})
$(document).click(function(){
  $(".dropdown").hide();
})
$(".dropdown .edit").click(function(e){
  $(".path_list .checkable").show();
  $(".path_list .delete").show();
  $(".cancel").show();
  $(".action_list").hide();
  $(".path_list").addClass("path_edit");
})
var countChecked = 0;
$(".cancel").click(function(){
  countChecked = 0;
  $(".path_list").removeClass("path_edit");
  $(".path_list .checkable").hide().removeClass("icon_check");
  $(".path_list .delete").hide().removeClass("active");
  $(".path_list .delete span").html(countChecked);
  $(".cancel").hide();
  $(".action_list").show();
})
$("body").on('click', '.path_edit .link', function(e){
  e.preventDefault();
  var child = $(this).children(".checkable");
  if (child.hasClass("icon_check")) {
    child.removeClass("icon_check");
    countChecked--;
  } else {
    child.addClass("icon_check");
    countChecked++;
  }
  if (countChecked > 0) {
    $('.delete').addClass('active');
  } else {
    $('.delete').removeClass('active');
  }
  $('.delete span').html(countChecked);
})
var totalHeight = $(".list_wrap").outerHeight();
var height = $(".path_list").height();
var request = true;
$(".path_list").scroll(function(){
  var scrollTop = $(this).scrollTop();
  totalHeight = $(".list_wrap").outerHeight();
  height = $(".path_list").height();
  if ((scrollTop + height) >= (totalHeight - 2)) {
    if (!request) return;
    $(".loading").show();
    request = false;
    setTimeout(function(){
        $(".loading").hide();
        request = true;
        $(".list_wrap").append('<div>123</div><div>123</div><div>123</div><div>123</div><div>123</div><div>123</div><div>123</div><div>123</div><div>123</div><div>123</div><div>123</div><div>123</div><div>123</div><div>123</div><div>123</div><div>123</div><div>123</div><div>123</div><div>123</div><div>123</div><div>123</div><div>123</div><div>123</div><div>123</div>');
        totalHeight = $(".list_wrap").outerHeight();
        height = $(".path_list").height();
    },1000);
  }
})
</script>
</html>
